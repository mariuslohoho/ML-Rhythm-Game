var d=Object.defineProperty;var f=(t,e,n)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var c=(t,e,n)=>f(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();let m=60,p=3;const y=document.querySelector("div.playfield"),h=y.querySelector("div.main"),l=h.querySelector("div.notes");async function g(t){const e=1e3/m,n=600;for(let s=0;s<=n;s++){const o=s*p/n*100;if(o>100)return;t.style.top=`${o}%`,await new Promise(r=>{setTimeout(r,e)})}}function w(t,e){const n=document.createElement("div");n.className="note",n.style.setProperty("--lane",`${t}`),e>3&&(e=3),t==11&&e==3&&(e=2),t==12&&(e=1),n.style.setProperty("--width",`${e}`),l.appendChild(n);function s(){parseInt(n.style.top)>=100?l.removeChild(n):requestAnimationFrame(s)}requestAnimationFrame(s),g(n)}class v{constructor(e){c(this,"notes",[]);c(this,"startTime",null);this.notes=e}start(){this.startTime=Date.now(),this.scheduleNotes()}scheduleNotes(){if(this.startTime===null){console.error("Scheduler has not started.");return}this.notes.forEach(e=>{const n=e.time,s=(Date.now()-this.startTime)/1e3,o=(n-s)*1e3;o>0&&setTimeout(()=>{w(e.lane,e.width)},o)})}}const S=window.require("fs"),T=document.querySelector("div.playfield"),a=T.querySelector("div.main");function u(){var r;const t=a.getBoundingClientRect(),e=t.left;if(e>0)return;const n=(t.width+e*2)/t.width-.25;a.style.setProperty("scale",n.toString());const s=(r=a.querySelector("div.judgement"))==null?void 0:r.getBoundingClientRect(),o=document.querySelector("div.touch");o.style.height="100vh",o.style.width=`${s.width}px`}u();window.addEventListener("resize",()=>{u()});async function N(t){return t===void 0?[!1,""]:t.Track_Gameplay.Audio.type==="file"&&!S.existsSync(t.Track_Gameplay.Audio.url)&&t.Track_Gameplay.Audio.url.match(/\.mp3$/)?[!1,"Cannot locate audio"]:t.Track_Gameplay.Beatmap_Notes.length===0?[!1,"Beatmap is empty :skull:"]:[!0,""]}async function q(t){const e=await(await fetch(t)).json();console.log(e);const[n,s]=await N(e);n||console.error(`The beatmap JSON File is not valid: ${s}`),new v(e.Track_Gameplay.Beatmap_Notes).start()}q("data/beatmaps/NewJeans-HypeBoy.json");
